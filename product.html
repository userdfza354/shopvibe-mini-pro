<!DOCTYPE html> <html lang="ar"> <head> <meta charset="UTF-8"> <title>طلب المنتج</title> <link rel="stylesheet" href="assets/styles.css"> </head> <body> <div class="container"> <h2>طلب المنتج</h2> <p id="productName"></p> <textarea id="note" placeholder="ملاحظة (اختياري)"></textarea> <button onclick="submitOrder()">إرسال الطلب</button> </div> <script> const urlParams = new URLSearchParams(window.location.search); const productId = urlParams.get('id'); const token = localStorage.getItem("token"); fetch(`http://localhost:8000/products/`) .then(res => res.json()) .then(data => { const product = data.find(p => p.id == productId); if (product) { document.getElementById("productName").textContent = `المنتج: ${product.name}`; } }); function submitOrder() { const note = document.getElementById("note").value; fetch("http://localhost:8000/orders/", { method: "POST", headers: { "Content-Type": "application/json", "token": token }, body: JSON.stringify({ product_id: parseInt(productId), note: note }) }).then(res => { if (res.ok) { alert("تم إرسال الطلب بنجاح!"); } else { alert("حدث خطأ. تأكد من تسجيل الدخول."); } }); } </script> </body> </html>